# GraphQL Schema: File 相关类型定义

# =============================================================================
# TYPES
# =============================================================================

"""
文件/目录条目
"""
type FileEntry {
	"""
	文件名
	"""
	name: String!
	"""
	完整路径
	"""
	path: String!
	"""
	是否为目录
	"""
	isDir: Boolean!
}

# =============================================================================
# NAMESPACED TYPES
# =============================================================================

"""
文件查询命名空间
"""
type FileQuery {
	"""
	列出目录内容（统一接口，支持本地和远程）
	当 connectionId 为空时访问本地路径，否则访问远程连接
	支持过滤器预览功能
	"""
	list(
		"""
		连接 ID - 为空时表示访问本地文件系统
		"""
		connectionId: ID
		"""
		目录路径（当前浏览的路径）
		"""
		path: String!
		"""
		同步任务的根路径（用于过滤器匹配）
		当使用过滤器预览时，过滤规则是相对于此路径进行匹配的
		如果不提供，默认使用 path 的值
		"""
		basePath: String
		"""
		过滤规则列表 - rclone filter 语法
		每个元素为一条规则，格式: "- pattern" (排除) 或 "+ pattern" (包含)
		规则按顺序匹配，第一个匹配的规则生效
		"""
		filters: [String!]
		"""
		是否包含文件 - 默认 false（仅返回目录）
		当为 true 时，返回目录和文件（用于过滤器预览）
		"""
		includeFiles: Boolean
	): [FileEntry!]! @goField(forceResolver: true)
}

# =============================================================================
# EXTEND ROOT TYPES
# =============================================================================

extend type Query {
	"""
	文件相关查询（命名空间）
	"""
	file: FileQuery! @goField(forceResolver: true)
}
